# Примена адресне аритметике

Све законитости и својства које смо до сада разматрали нашли су примену у
тзв. **показивачкој аритметици**.

```{infonote}
Из табеле оператора уочи да заграда ``()`` има највећи приоритет: 15.
Оператори ``++``, ``--``, ``*``, ``&``, ``sizeof`` имају исти приоритет: 14 и групишу се здесна улево.
Табела оператора је дата у прилогу.
```

Најједноставније ћемо основе показивачке аритметике показати користећи познати
низ и на њему применити одговарајуће изразе.

Као и у претходним примерима свака од наредби ће се извршавати суксесивно, једна
за другом.

```c
int a[]={7, 12, 36, 4, 18};
int  x,y;
int *p;
```

Стање оперативне меморије после наредби `int a[] = {7, 12, 36, 4, 18}, x, y, *p`:

```{image} images/Picture23.png
:width: 350
:align: center
```

``p = a + 2;``

Овом наредбом додељујемо показивачу ``р`` адресу трећег елемента.

Стање оперативне меморије после наредбе `p = a + 2`:

```{image} images/Picture24.png
:width: 350
:align: center
```

``x = *p + 2;``

Вредност на мемориjској локацији на коју указује показивач ``(*р)``
износи 36, тако да ``x`` добија вредност 38.

Стање оперативне меморије после наредбе `x = *p + 2`:

```{image} images/Picture25.png
:width: 350
:align: center
```

``y = *p--;``

Рекли смо да оператори ``*`` и ``--`` имају исти приоритет, читају се здесна
улево. Особина унарног оператора ``--`` се односи на показивач, а не на податак
на који он указује. Зато je y = 36, а показивач се помера за једно место уназад.

Стање оперативне меморије после наредбе `y = *p--`:

```{image} images/Picture26.png
:width: 350
:align: center
```

``x=*(p + 2);``

Знамо да заграда има највећи приоритет, тако да ``x`` добија вредност елемента низа
на четвртом месту, x = 4.

Стање оперативне меморије после наредбе `x=*(p + 2)`:

```{image} images/Picture27.png
:width: 350
:align: center
```

``y = (*p) + 3;``

Показивач је „остао“ на својој позицији, тако да се овом наредбом повећава
показивани податак, односно  y = 15.

Стање оперативне меморије после наредбе `y = (*p) + 3`:

```{image} images/Picture28.png
:width: 350
:align: center
```

``x = --(*p) + 7;``

Аналогно претходном примеру, поштујућу префиксну нотацију, као и то да заграда
има највећи приоритет, прво се чита вредност на коју указује показивач, а
затим се та вредност декрементира, односно израз ``--(*p)`` добија вредност 11.
Јасно је да је x = 18.

Стање оперативне меморије после наредбе `x = --(*p) + 7`:

```{image} images/Picture29.png
:width: 350
:align: center
```

И још једна карактеристична наредба:

``y = *(++p) - 4``

У овом случају, вредност показивача се у загради прво инкрементира, односно показивач
указује сада на наредни елемент низа, а затим се чита вредност на тој позицији, односно
израз ``*(++p)`` враћа вредност 36.

y = 32

Стање оперативне меморије после наредбе `y = *(++p) - 4`:

```{image} images/Picture30.png
:width: 350
:align: center
```

**Решење задатка:**

```c
#include<stdio.h>
int main(void)
{
    int a[] = {7, 12, 36, 4, 18};
    int x, y;
    int* p;
    p = a + 2;
    x = *p + 2;
    printf("x = *p + 2 \t x = %d\n", x);
    y = *p--;
    printf("y = *p-- \t y = %d\n", y);
    x = *(p + 2);
    printf("x = *(p + 2) \t x = %d\n", x);
    y = (*p) + 3;
    printf("y = (*p) + 3 \t y = %d\n", y);
    x = --(*p) + 7;
    printf("x = --(*p) + 7 \t x = %d\n", x);
    y = *(++p) - 4;
    printf("y = *(++p) - 4 \t y = %d\n", y);
    return(0);
}
```

Резултат извршавања програма:

```text
x = *p + 2       x = 38
y = *p--         y = 36
x = *(p + 2)     x = 4
y = (*p) + 3     y = 15
x = --(*p) + 7   x = 18
y = *(++p) - 4   y = 32
```

**Задаци за вежбу:**

```c
int a[5] = {10, 15, 20, 25, 30}, *p, x, y;
p = a + 2;
x = *(++p) + 3;
y = --(*p) - 7;
```

```{mchoice}
:answer1: x = 23, y = 13
:answer2: x = 20, y = 10
:answer3: x = 28, y = 17
:correct: 3

Поштујући правила показивачке аритметике, одредити вредности променљивих
``x`` и ``y`` после извршења задатог кодa.
```

```c
int x = 17, y = -25, z = 30, *p1, *p2;
p1 = &y;
p2 = p1;
y = (*p2) - 12;
z = *p1 - 3;
```

```{mchoice}
:answer1: x = 17, y = -27, z=-30
:answer2: x = 20, y = -30, z = -33
:answer3: x = 17, y = -37, z = -40 
:correct: 3

Поштујући правила показивачке аритметике, одредити вредности променљивих
``x``, ``y`` и ``z`` после извршења задатог кодa.
```
